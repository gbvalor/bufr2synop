<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bufr2synop: src/libraries/bufr2tac_utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">bufr2synop<span id="projectnumber">&#160;0.23.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_588cd77586230d2c129f15f0bca2b9b2.html">libraries</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">bufr2tac_utils.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>file with the utility routines for binary bufr2tac  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bufr2tac_8h_source.html">bufr2tac.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bufr2tac_utils.c:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c__incl.png" border="0" usemap="#asrc_2libraries_2bufr2tac__utils_8c" alt=""/></div>
<map name="asrc_2libraries_2bufr2tac__utils_8c" id="asrc_2libraries_2bufr2tac__utils_8c">
<area shape="rect" title="file with the utility routines for binary bufr2tac" alt="" coords="434,5,574,47"/>
<area shape="rect" href="bufr2tac_8h.html" title=" " alt="" coords="464,95,544,121"/>
<area shape="rect" title=" " alt="" coords="5,244,67,271"/>
<area shape="rect" title=" " alt="" coords="91,244,155,271"/>
<area shape="rect" title=" " alt="" coords="179,244,245,271"/>
<area shape="rect" title=" " alt="" coords="269,244,339,271"/>
<area shape="rect" title=" " alt="" coords="453,244,512,271"/>
<area shape="rect" title=" " alt="" coords="537,244,599,271"/>
<area shape="rect" title=" " alt="" coords="624,244,704,271"/>
<area shape="rect" href="bufrdeco_8h.html" title="Include header file for bufrdeco library." alt="" coords="355,169,437,196"/>
<area shape="rect" href="metsynop_8h.html" title="Main header file for synop related tasks." alt="" coords="617,169,708,196"/>
<area shape="rect" href="metbuoy_8h.html" title="Main header file for buoy related tasks." alt="" coords="841,169,924,196"/>
<area shape="rect" href="mettemp_8h.html" title="Main header file for temp report related tasks." alt="" coords="733,169,817,196"/>
<area shape="rect" href="metclimat_8h.html" title=" " alt="" coords="948,169,1039,196"/>
<area shape="rect" title=" " alt="" coords="363,244,429,271"/>
<area shape="rect" href="metcommon_8h.html" title="Main header file for common report structures." alt="" coords="727,244,833,271"/>
</map>
</div>
</div>
<p><a href="bufr2tac__utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aca5951fa477d55a17c610f7c10cdd18a"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#aca5951fa477d55a17c610f7c10cdd18a">three_bytes_to_uint</a> (const unsigned char *source)</td></tr>
<tr class="memdesc:aca5951fa477d55a17c610f7c10cdd18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the integer value from an array of three bytes, most significant first  <a href="bufr2tac__utils_8c.html#aca5951fa477d55a17c610f7c10cdd18a">More...</a><br /></td></tr>
<tr class="separator:aca5951fa477d55a17c610f7c10cdd18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4beba3db514cc374360aa9042ad482"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a3d4beba3db514cc374360aa9042ad482">integer_to_descriptor</a> (struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *d, int id)</td></tr>
<tr class="memdesc:a3d4beba3db514cc374360aa9042ad482"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse an integer with a descriptor fom bufr ECWMF libary  <a href="bufr2tac__utils_8c.html#a3d4beba3db514cc374360aa9042ad482">More...</a><br /></td></tr>
<tr class="separator:a3d4beba3db514cc374360aa9042ad482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeedbf3464b812e1d69314bbb1128acf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#adeedbf3464b812e1d69314bbb1128acf">descriptor_to_integer</a> (int *id, struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *d)</td></tr>
<tr class="memdesc:adeedbf3464b812e1d69314bbb1128acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse a descriptor and sets an integer in the decimal formas fxxyyy  <a href="bufr2tac__utils_8c.html#adeedbf3464b812e1d69314bbb1128acf">More...</a><br /></td></tr>
<tr class="separator:adeedbf3464b812e1d69314bbb1128acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942da547fb750f611eee926a86726620"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a942da547fb750f611eee926a86726620">get_flag_value</a> (uint8_t width, uint8_t index)</td></tr>
<tr class="separator:a942da547fb750f611eee926a86726620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5255156f0e99c70c1b2032ffc69cc831"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a5255156f0e99c70c1b2032ffc69cc831">charray_to_string</a> (char *s, unsigned char *buf, size_t size)</td></tr>
<tr class="memdesc:a5255156f0e99c70c1b2032ffc69cc831"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a null termitated c-string from an array of unsigned chars  <a href="bufr2tac__utils_8c.html#a5255156f0e99c70c1b2032ffc69cc831">More...</a><br /></td></tr>
<tr class="separator:a5255156f0e99c70c1b2032ffc69cc831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef21370a9e78b1263e5bdc0a58a6d596"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#aef21370a9e78b1263e5bdc0a58a6d596">adjust_string</a> (char *s)</td></tr>
<tr class="memdesc:aef21370a9e78b1263e5bdc0a58a6d596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Supress trailing blanks of a string.  <a href="bufr2tac__utils_8c.html#aef21370a9e78b1263e5bdc0a58a6d596">More...</a><br /></td></tr>
<tr class="separator:aef21370a9e78b1263e5bdc0a58a6d596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef4777dfa46d3929577005a97abc3f6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a> (char *tk[], size_t ntk, char *target, size_t len, char *blanks)</td></tr>
<tr class="memdesc:a4ef4777dfa46d3929577005a97abc3f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split the report string into tokens.  <a href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">More...</a><br /></td></tr>
<tr class="separator:a4ef4777dfa46d3929577005a97abc3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb0b1348d967dccdf492c088172e36a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#aaeb0b1348d967dccdf492c088172e36a">YYYYMMDDHHmm_to_met_datetime</a> (struct <a class="el" href="structmet__datetime.html">met_datetime</a> *t, const char *source)</td></tr>
<tr class="memdesc:aaeb0b1348d967dccdf492c088172e36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the string YYYYMMDDHHmm[ss] and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>.  <a href="bufr2tac__utils_8c.html#aaeb0b1348d967dccdf492c088172e36a">More...</a><br /></td></tr>
<tr class="separator:aaeb0b1348d967dccdf492c088172e36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129b6c8a3bbf2d6545439b80255004be"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a129b6c8a3bbf2d6545439b80255004be">met_datetime_to_YYGG</a> (char *target, struct <a class="el" href="structmet__datetime.html">met_datetime</a> *t)</td></tr>
<tr class="memdesc:a129b6c8a3bbf2d6545439b80255004be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get YYGG from a struct <a class="el" href="structmet__datetime.html">met_datetime</a>.  <a href="bufr2tac__utils_8c.html#a129b6c8a3bbf2d6545439b80255004be">More...</a><br /></td></tr>
<tr class="separator:a129b6c8a3bbf2d6545439b80255004be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22cff10c1bb64730fad9765ef9c329c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#ab22cff10c1bb64730fad9765ef9c329c">round_met_datetime_to_hour</a> (struct <a class="el" href="structmet__datetime.html">met_datetime</a> *target, struct <a class="el" href="structmet__datetime.html">met_datetime</a> *source)</td></tr>
<tr class="separator:ab22cff10c1bb64730fad9765ef9c329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294969d52c0ebb804a4ceaf8ae37379a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a294969d52c0ebb804a4ceaf8ae37379a">guess_WMO_region</a> (char *A1, char *Reg, const char *II, const char *iii)</td></tr>
<tr class="memdesc:a294969d52c0ebb804a4ceaf8ae37379a"><td class="mdescLeft">&#160;</td><td class="mdescRight">get WMO region A1 and Reg items from II and iii (WMO index)  <a href="bufr2tac__utils_8c.html#a294969d52c0ebb804a4ceaf8ae37379a">More...</a><br /></td></tr>
<tr class="separator:a294969d52c0ebb804a4ceaf8ae37379a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ef46e3b3a4233f83a9e8025208bd80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a13ef46e3b3a4233f83a9e8025208bd80">check_date_from_future</a> (struct <a class="el" href="structmetreport.html">metreport</a> *m)</td></tr>
<tr class="memdesc:a13ef46e3b3a4233f83a9e8025208bd80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check a estructure <a class="el" href="structmetreport.html">metreport</a> not from future.  <a href="bufr2tac__utils_8c.html#a13ef46e3b3a4233f83a9e8025208bd80">More...</a><br /></td></tr>
<tr class="separator:a13ef46e3b3a4233f83a9e8025208bd80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1432202487dc3d91032202440d793694"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bufr2tac__utils_8c.html#a1432202487dc3d91032202440d793694">guess_gts_header</a> (struct <a class="el" href="structgts__header.html">gts_header</a> *h, const char *f)</td></tr>
<tr class="memdesc:a1432202487dc3d91032202440d793694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guess the WMO GTS header from filename.  <a href="bufr2tac__utils_8c.html#a1432202487dc3d91032202440d793694">More...</a><br /></td></tr>
<tr class="separator:a1432202487dc3d91032202440d793694"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >file with the utility routines for binary bufr2tac </p>

<p class="definition">Definition in file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aef21370a9e78b1263e5bdc0a58a6d596" name="aef21370a9e78b1263e5bdc0a58a6d596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef21370a9e78b1263e5bdc0a58a6d596">&#9670;&nbsp;</a></span>adjust_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * adjust_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Supress trailing blanks of a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>string to process </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00099">99</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>{</div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordtype">size_t</span> l;</div>
<div class="line"><span class="lineno">  102</span>  l = strlen ( s );</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">while</span> ( l &amp;&amp; s[--l] == <span class="charliteral">&#39; &#39;</span> )</div>
<div class="line"><span class="lineno">  104</span>    s[l] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">return</span> s;</div>
<div class="line"><span class="lineno">  106</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bufr2tac__x01_8c_source.html#l00205">buoy_parse_x01()</a>, <a class="el" href="bufr2tac__x01_8c_source.html#l00324">climat_parse_x01()</a>, <a class="el" href="bufr2tac__x01_8c_source.html#l00054">syn_parse_x01()</a>, and <a class="el" href="bufr2tac__x01_8c_source.html#l00415">temp_parse_x01()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_aef21370a9e78b1263e5bdc0a58a6d596_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_aef21370a9e78b1263e5bdc0a58a6d596_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_aef21370a9e78b1263e5bdc0a58a6d596_icgraph" id="abufr2tac__utils_8c_aef21370a9e78b1263e5bdc0a58a6d596_icgraph">
<area shape="rect" title="Supress trailing blanks of a string." alt="" coords="904,81,1000,108"/>
<area shape="rect" href="bufr2tac__x01_8c.html#a5212280b7ff69cb2b4638650fc2ed238" title="Parse a expanded descriptor with X = 01." alt="" coords="735,5,853,32"/>
<area shape="rect" href="bufr2tac__x01_8c.html#ad365ebf101bf7efa3ee0dd058ec653c2" title="Parse a expanded descriptor with X = 01." alt="" coords="732,56,856,83"/>
<area shape="rect" href="bufr2tac__x01_8c.html#a7e01ae6b0c895b8a3e3a7d3d7051cf24" title="Parse a expanded descriptor with X = 01." alt="" coords="739,107,849,133"/>
<area shape="rect" href="bufr2tac__x01_8c.html#ab4e7de2f03b6acb22c5d9641e737db44" title="Parse a expanded descriptor with X = 01." alt="" coords="735,157,853,184"/>
<area shape="rect" href="bufr2tac__buoy_8c.html#ad8bb92861ee8db76f664f8fa8923a099" title=" " alt="" coords="525,5,681,32"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,81,473,108"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,74,263,115"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,81,56,108"/>
<area shape="rect" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title=" " alt="" coords="521,56,684,83"/>
<area shape="rect" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report" alt="" coords="521,107,684,133"/>
<area shape="rect" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title=" " alt="" coords="524,157,681,184"/>
</map>
</div>

</div>
</div>
<a id="a5255156f0e99c70c1b2032ffc69cc831" name="a5255156f0e99c70c1b2032ffc69cc831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5255156f0e99c70c1b2032ffc69cc831">&#9670;&nbsp;</a></span>charray_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * charray_to_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get a null termitated c-string from an array of unsigned chars </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>resulting string </td></tr>
    <tr><td class="paramname">buf</td><td>pointer to first element in array </td></tr>
    <tr><td class="paramname">size</td><td>number of chars in array </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00085">85</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>{</div>
<div class="line"><span class="lineno">   87</span>  <span class="comment">// copy</span></div>
<div class="line"><span class="lineno">   88</span>  memcpy ( s , buf, size );</div>
<div class="line"><span class="lineno">   89</span>  <span class="comment">// add final string mark</span></div>
<div class="line"><span class="lineno">   90</span>  s[size] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordflow">return</span> s;</div>
<div class="line"><span class="lineno">   92</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a13ef46e3b3a4233f83a9e8025208bd80" name="a13ef46e3b3a4233f83a9e8025208bd80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ef46e3b3a4233f83a9e8025208bd80">&#9670;&nbsp;</a></span>check_date_from_future()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_date_from_future </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmetreport.html">metreport</a> *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check a estructure <a class="el" href="structmetreport.html">metreport</a> not from future. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>pointer to a struct metreport to check about date and time</td></tr>
  </table>
  </dd>
</dl>
<p>It resturns 1 if date/time is from future, and likely wrong Returns 0 otherwise </p>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00292">292</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  293</span>{</div>
<div class="line"><span class="lineno">  294</span>  time_t now;</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>  now = time ( NULL );</div>
<div class="line"><span class="lineno">  297</span>  <span class="keywordflow">if</span> ( m-&gt;<a class="code hl_variable" href="structmetreport.html#abb498d9c9d264c4150820c3d984ec45f">t</a>.<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> &gt; ( now + 1800 ) ) <span class="comment">// Still 1/2 hour courtesy</span></div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  299</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  301</span>}</div>
<div class="ttc" id="astructmet__datetime_html_ae3a1d87e2282cb3ba5a2e798240ac20d"><div class="ttname"><a href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">met_datetime::t</a></div><div class="ttdeci">time_t t</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00061">metcommon.h:61</a></div></div>
<div class="ttc" id="astructmetreport_html_abb498d9c9d264c4150820c3d984ec45f"><div class="ttname"><a href="structmetreport.html#abb498d9c9d264c4150820c3d984ec45f">metreport::t</a></div><div class="ttdeci">struct met_datetime t</div><div class="ttdef"><b>Definition:</b> <a href="bufr2tac_8h_source.html#l00312">bufr2tac.h:312</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufr2tac_8h_source.html#l00312">metreport::t</a>, and <a class="el" href="metcommon_8h_source.html#l00061">met_datetime::t</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufr2tac__climat_8c_source.html#l00038">parse_subset_as_climat()</a>, and <a class="el" href="bufr2tac__synop_8c_source.html#l00119">parse_subset_as_synop()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph" id="abufr2tac__utils_8c_a13ef46e3b3a4233f83a9e8025208bd80_icgraph">
<area shape="rect" title="Check a estructure metreport not from future." alt="" coords="732,31,895,57"/>
<area shape="rect" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title=" " alt="" coords="521,5,684,32"/>
<area shape="rect" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report" alt="" coords="521,56,684,83"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,31,473,57"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,23,263,65"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,31,56,57"/>
</map>
</div>

</div>
</div>
<a id="adeedbf3464b812e1d69314bbb1128acf" name="adeedbf3464b812e1d69314bbb1128acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeedbf3464b812e1d69314bbb1128acf">&#9670;&nbsp;</a></span>descriptor_to_integer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int descriptor_to_integer </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse a descriptor and sets an integer in the decimal formas fxxyyy </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>pointer to target integer </td></tr>
    <tr><td class="paramname">d</td><td>pointer to a struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> with the source </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00058">58</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span>  <span class="keywordflow">if</span> ( d == NULL )</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   62</span>  *<span class="keywordtype">id</span> = 100000 * d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">f</a> + 1000 * d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">x</a> + d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">y</a>;</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   64</span>}</div>
<div class="ttc" id="astructbufr__descriptor_html_a10c6cde4791d3f4721df491db0092b56"><div class="ttname"><a href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">bufr_descriptor::x</a></div><div class="ttdeci">uint8_t x</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00375">bufrdeco.h:375</a></div></div>
<div class="ttc" id="astructbufr__descriptor_html_aa86bfd702067eca32ea3266fc0a27ad8"><div class="ttname"><a href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">bufr_descriptor::y</a></div><div class="ttdeci">uint8_t y</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00376">bufrdeco.h:376</a></div></div>
<div class="ttc" id="astructbufr__descriptor_html_ae9e66859d27018f2de3bc31f21c75c4e"><div class="ttname"><a href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">bufr_descriptor::f</a></div><div class="ttdeci">uint8_t f</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00374">bufrdeco.h:374</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00374">bufr_descriptor::f</a>, <a class="el" href="bufrdeco_8h_source.html#l00375">bufr_descriptor::x</a>, and <a class="el" href="bufrdeco_8h_source.html#l00376">bufr_descriptor::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac__io_8c_source.html#l00308">bufrtotac_parse_subset_sequence()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph" id="abufr2tac__utils_8c_adeedbf3464b812e1d69314bbb1128acf_icgraph">
<area shape="rect" title="parse a descriptor and sets an integer in the decimal formas fxxyyy" alt="" coords="311,13,453,39"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,5,263,47"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,39"/>
</map>
</div>

</div>
</div>
<a id="a942da547fb750f611eee926a86726620" name="a942da547fb750f611eee926a86726620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942da547fb750f611eee926a86726620">&#9670;&nbsp;</a></span>get_flag_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_flag_value </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00066">66</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>{</div>
<div class="line"><span class="lineno">   68</span>  <span class="keywordflow">if</span> ( width == index )</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">return</span> ( uint32_t ) 1;</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( width &lt; index )</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> ( uint32_t ) 0;</div>
<div class="line"><span class="lineno">   72</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( width &lt;= 32 )</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">return</span> ( ( ( uint32_t ) 1 ) &lt;&lt; ( width - index ) );</div>
<div class="line"><span class="lineno">   74</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="keywordflow">return</span> ( uint32_t ) 0;</div>
<div class="line"><span class="lineno">   76</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1432202487dc3d91032202440d793694" name="a1432202487dc3d91032202440d793694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1432202487dc3d91032202440d793694">&#9670;&nbsp;</a></span>guess_gts_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int guess_gts_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgts__header.html">gts_header</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guess the WMO GTS header from filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>pointer to a struct <a class="el" href="structgts__header.html">gts_header</a> where to set the results </td></tr>
    <tr><td class="paramname">f</td><td>pathname of bufrfile</td></tr>
  </table>
  </dd>
</dl>
<p>It returns 1 if guessed, 0 otherwise</p>
<pre>
This routine assume the filename format of a bufr file is

  YYYYMMDDHHmmss_BULLNN_ICAO_YYGGgg_ORD.bufr

where

 YYYYMMDDHHmmss

is the timestamp (UTC) of the file in GTS (as example, in NOAA gateway)

BULLNN is the bulletin identifier in GTS. It is a six chars lenght in the form T1 T2 A1 A2 N1 N2

  For observations, T1 is 'I'
  Possible values of T2 for T1 = 'I' are
     O   Oceanographic/limnographic (water properties)
     P   Pictorial
     S   Surface/sea level
     T   Text (plain language information)
     U   Upper air
     X   Other data types
     Z   Mixed data types


  For T1T2 = 'IS' Then A1:

     IS A 01–29 Routinely scheduled observations for n/a 000/006
                distribution from automatic (fixed or mobile)
                land stations (e.g. 0000, 0100, … or 0220, 0240,
                0300, …, or 0715, 0745, ... UTC)
     IS A 30–59 N-minute observations from automatic (fixed n/a 000/007
                or mobile) land stations
     IS B   Radar reports (parts A and B) RADOB 006/003
     IS C 01–45 Climatic observations from land stations CLIMAT 000/020
     IS C 46–59 Climatic observations from marine stations CLIMAT SHIP 001/0202009 edition
                ATTACHmENT II-5 I
     IS D   Radiological observation RADREP 010/001
     IS E   Ozone measurement at surface n/a 008/000
     IS F   Source of atmospherics SFAZI, SFLOC, SFAZU 000/030
     IS I 01–45 Intermediate synoptic observations from fixed SYNOP (SIxx) 000/001
            land stations 000/051
     IS I 46–59 Intermediate synoptic observations from mobile SYNOP mOBIL 000/004
            land stations
     IS M 01–45 Main synoptic observations from fixed land SYNOP (SMxx) 000/002
            stations 000/052
     IS M 46–59 Main synoptic observations from mobile land SYNOP mOBIL 000/005
             stations
     IS N 01–45 Synoptic observations from fixed land stations SYNOP (SNxx) 000/000
            at non-standard time (i.e. 0100, 0200, 0400,   000/050
            0500, ... UTC)
     IS N 46–59 Synoptic observations from mobile land stations SYNOP mOBIL 000/003
            at non-standard time (i.e. 0100, 0200, 0400,
            0500, ... UTC)
     IS R   Hydrologic reports HYDRA 000/040
     IS S 01–19 Synoptic observations from marine stations SHIP 001/000
     IS S 20–39 One-hour observations from automatic marine n/a 001/006
           stations
     IS S 40–59 N-minute observations from automatic marine n/a 001/007
           stations
     IS T 01–19 Tide gauge observations n/a 001/030
     IS T 20–39 Observed water level time series n/a 001/031
     IS V   Special aeronautical observations (SPECI) SPECI 000/011
     IS W   Aviation routine weather observations (mETAR) mETAR 000/010
     IS X   Other surface data IAC, IAC FLEET

  For T1T2 = 'IU'  then A1:
     IU A   Single level aircraft reports (automatic) AmDAR 004/000
     IU A   Single level aircraft reports (manual) AIREP/PIREP 004/001
     IU B   Single level balloon reports n/a
     IU C   (used for single level satellite-derived SAREP/SATOB 005/000
             reports – see Note 3)
     IU D   Dropsonde/Dropwindsondes TEmP DROP 002/007
     IU E   Ozone vertical sounding n/a 008/001
     IU I   Dispersal and transport analysis n/a 009/000
     IU J 01–19 Upper wind from fixed land stations (entire PILOT (parts A, 002/001
            sounding) B, C, D)
     IU J 20–39 Upper wind from mobile land stations (entire PILOT mOBIL 002/003
            sounding) (parts A, B, C, D)
     IU J 40–59 Upper wind from marine stations (entire PILOT SHIP 002/002
           sounding) (parts A, B, C, D)
     IU K 01–19 Radio soundings from fixed land stations TEmP (parts A, B) 002/004
           (up to 100 hPa)
     IU K 20–39 Radio soundings from mobile land stations TEmP mOBIL 002/006
          (up to 100 hPa) (parts A, B)
     IU K 40–59 Radio soundings from marine stations TEmP SHIP (parts A, B) 002/005
           (up to 100 hPa)
     IU M   Model derived sondes
     IU N   Rocketsondes
     IU O   Profiles of aircraft observations in ascending/ AmDAR 002/020
            descending
     IU P   Profilers PILOT 002/010
     IU Q   RASS temperature profilers TEmP 002/011
     IU R   (used for radiance data – see Note 3)
     IU S   01–19 Radiosondes/pibal reports from fixed land TEmP (parts A, B, C, D) 002/004
             stations (entire sounding)
     IU S 20–39 Radio soundings from mobile land stations TEmP mOBIL (parts A, 002/006
             (entire sounding) B, C, D)
     IU S 40–59 Radio soundings from marine stations TEmP SHIP (parts A, 002/005
             (entire sounding) B, C, D)
     IU T   (used for satellite-derived sondes – see Note 3) SATEm, SARAD, SATOB
     IU U 01–45 Monthly statistics of data from upper-air stations CLImAT TEmP 002/025
     IU U 46–59 Monthly statistics of data from marine stations CLImAT TEmP, SHIP 002/026
     IU W 01–19 Upper wind from fixed land stations (up to PILOT (parts A, B) 002/001
             100 hPa)
     IU W 20–39 Upper wind from mobile land stations (up to PILOT mOBIL 002/003
             100 hPa) (parts A, B)
     IU W 40–59 Upper wind from marine stations (up to PILOT SHIP 002/002
             100 hPa) (parts A, B)
     IU X   Other upper-air reports

  for T1T2 = 'IO' then  A1:
     IO B   Buoy observations BUOY 001/025
     IO I   Sea ice
     IO P   Sub-surface profiling floats TESAC 031/004
     IO R   Sea surface observations TRACKOB 031/001
     IO S   Sea surface and below soundings BATHY, TESAC 031/005
     IO T   Sea surface temperature
     IO W   Sea surface waves WAVEOB 031/002
     IO X   Other sea environmental

  About A2
     A   0 - 90W northern hemisphere
     B   90W - 180 northern hemisphere
     C   180 - 90E northern hemisphere
     D   90E - 0 northern hemisphere
     E   0 - 90W tropical belt
     F   90W - 180 tropical belt
     G   180 - 90E tropical belt
     H   90E - 0 tropical belt
     I   0 - 90W southern hemisphere
     J   90W - 180 southern hemisphere
     K   180 - 90E southern hemisphere
     L   90E - 0 southern hemisphere
     M   Lower left 10S 100E/upper right 70N 110W
     N   Northern hemisphere
     P   Area between 64.69N - 136.76W, 55.61N - 13.43W
     64.69N - 156.76W, 55.61N - 33.43W
     S   Southern hemisphere
     T   45W - 180 northern hemisphere
     U   Area between 21.0N - 128.1W, 36.0N - 130.9W
               21.1N - 113.0W, 36.2N - 110.5W
     V   Area between 30.3N - 83.7W, 51.0N - 68.9W
               19.8N - 64.5W, 33.3N - 47.1W
     X   Global Area (area not definable)


 ICAO is the ICAO index for release center.

 YYGGgg is the nominal release time (day, hour, minute) UTC

 ORD is the order sequence as RRA, RRB, CCA .... is optional
</pre> 
<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00466">466</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  467</span>{</div>
<div class="line"><span class="lineno">  468</span>  <span class="keywordtype">size_t</span> nt;</div>
<div class="line"><span class="lineno">  469</span>  <span class="keywordtype">char</span> aux[256], *tk[16], *c;</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>  <span class="comment">// parse file name</span></div>
<div class="line"><span class="lineno">  472</span>  strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#aa6b668ca77c07d9335cf29afc44527bb">filename</a>, f );</div>
<div class="line"><span class="lineno">  473</span>  strcpy ( aux, f );</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>  <span class="comment">// check latest &#39;/&#39; in filename</span></div>
<div class="line"><span class="lineno">  476</span>  <span class="keywordflow">if</span> ( ( c = strrchr ( aux,<span class="charliteral">&#39;/&#39;</span> ) ) == NULL )</div>
<div class="line"><span class="lineno">  477</span>    c = &amp;aux[0];</div>
<div class="line"><span class="lineno">  478</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  479</span>    c++;</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>  nt = <a class="code hl_function" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a> ( tk, 16, c, strlen ( c ), <span class="stringliteral">&quot;_. &quot;</span> );</div>
<div class="line"><span class="lineno">  482</span>  <span class="comment">// parse filenames with format as example &#39;AAAAMMDDHHmmss_ISIE06_SBBR_012100_RRB.bufr&#39;</span></div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>  <span class="comment">// 5 or 6 items</span></div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">if</span> ( nt &lt; 5 || nt &gt; 6 )</div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>  <span class="comment">// extension bufr</span></div>
<div class="line"><span class="lineno">  489</span>  <span class="keywordflow">if</span> ( strcmp ( tk[nt - 1],<span class="stringliteral">&quot;bufr&quot;</span> ) )</div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>  <span class="comment">// item 0 the timestamp of file in NOAA GTS gateway</span></div>
<div class="line"><span class="lineno">  493</span>  <span class="keywordflow">if</span> ( strlen ( tk[0] ) != 14 || strspn ( tk[0], <span class="stringliteral">&quot;0123456789&quot;</span> ) != 14 )</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  495</span>  strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">timestamp</a>, tk[0] );</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>  <span class="comment">// item 1</span></div>
<div class="line"><span class="lineno">  498</span>  <span class="keywordflow">if</span> ( strlen ( tk[1] ) != 6 || strspn ( &amp;tk[1][4],<span class="stringliteral">&quot;0123456789&quot;</span> ) != 2 )</div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  500</span>  strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">bname</a>, tk[1] );</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>  <span class="comment">// item 2</span></div>
<div class="line"><span class="lineno">  503</span>  <span class="keywordflow">if</span> ( strlen ( tk[2] ) != 4 )</div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  505</span>  strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">center</a>, tk[2] );</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>  <span class="keywordflow">if</span> ( strlen ( tk[3] ) != 6 || strspn ( tk[3], <span class="stringliteral">&quot;0123456789&quot;</span> ) != 6 )</div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  509</span>  strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">dtrel</a>, tk[3] );</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>  <span class="keywordflow">if</span> ( nt == 5 )</div>
<div class="line"><span class="lineno">  512</span>    {</div>
<div class="line"><span class="lineno">  513</span>      strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, <span class="stringliteral">&quot;BBB&quot;</span> );</div>
<div class="line"><span class="lineno">  514</span>    }</div>
<div class="line"><span class="lineno">  515</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  516</span>    {</div>
<div class="line"><span class="lineno">  517</span>      <span class="keywordflow">if</span> ( strlen ( tk[4] ) == 3 )</div>
<div class="line"><span class="lineno">  518</span>        strcpy ( h-&gt;<a class="code hl_variable" href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">order</a>, tk[4] );</div>
<div class="line"><span class="lineno">  519</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  520</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  521</span>    }</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  524</span>}</div>
<div class="ttc" id="abufr2tac__utils_8c_html_a4ef4777dfa46d3929577005a97abc3f6"><div class="ttname"><a href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6">tokenize_string</a></div><div class="ttdeci">size_t tokenize_string(char *tk[], size_t ntk, char *target, size_t len, char *blanks)</div><div class="ttdoc">Split the report string into tokens.</div><div class="ttdef"><b>Definition:</b> <a href="bufr2tac__utils_8c_source.html#l00121">bufr2tac_utils.c:121</a></div></div>
<div class="ttc" id="astructgts__header_html_a242f2fa9672b22db631d592283a8ae30"><div class="ttname"><a href="structgts__header.html#a242f2fa9672b22db631d592283a8ae30">gts_header::center</a></div><div class="ttdeci">char center[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00635">bufrdeco.h:635</a></div></div>
<div class="ttc" id="astructgts__header_html_a2d6cac95fb647c857f524ba1b957de4e"><div class="ttname"><a href="structgts__header.html#a2d6cac95fb647c857f524ba1b957de4e">gts_header::dtrel</a></div><div class="ttdeci">char dtrel[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00636">bufrdeco.h:636</a></div></div>
<div class="ttc" id="astructgts__header_html_a4b7aa0549fd269b056c6338343d29f12"><div class="ttname"><a href="structgts__header.html#a4b7aa0549fd269b056c6338343d29f12">gts_header::order</a></div><div class="ttdeci">char order[8]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00637">bufrdeco.h:637</a></div></div>
<div class="ttc" id="astructgts__header_html_a5a3261f82bdb971a89402298f58c0d54"><div class="ttname"><a href="structgts__header.html#a5a3261f82bdb971a89402298f58c0d54">gts_header::bname</a></div><div class="ttdeci">char bname[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00634">bufrdeco.h:634</a></div></div>
<div class="ttc" id="astructgts__header_html_aa6b668ca77c07d9335cf29afc44527bb"><div class="ttname"><a href="structgts__header.html#aa6b668ca77c07d9335cf29afc44527bb">gts_header::filename</a></div><div class="ttdeci">char filename[BUFRDECO_PATH_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00638">bufrdeco.h:638</a></div></div>
<div class="ttc" id="astructgts__header_html_ab4f0ca0892d074656af878e227d802b0"><div class="ttname"><a href="structgts__header.html#ab4f0ca0892d074656af878e227d802b0">gts_header::timestamp</a></div><div class="ttdeci">char timestamp[16]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00639">bufrdeco.h:639</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00634">gts_header::bname</a>, <a class="el" href="bufrdeco_8h_source.html#l00635">gts_header::center</a>, <a class="el" href="bufrdeco_8h_source.html#l00636">gts_header::dtrel</a>, <a class="el" href="bufrdeco_8h_source.html#l00638">gts_header::filename</a>, <a class="el" href="bufrdeco_8h_source.html#l00637">gts_header::order</a>, <a class="el" href="bufrdeco_8h_source.html#l00639">gts_header::timestamp</a>, and <a class="el" href="bufr2tac__utils_8c_source.html#l00121">tokenize_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufrtotac_8c_source.html#l00125">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph.png" border="0" usemap="#abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph" id="abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_cgraph">
<area shape="rect" title="Guess the WMO GTS header from filename." alt="" coords="5,5,133,32"/>
<area shape="rect" href="bufr2tac__utils_8c.html#a4ef4777dfa46d3929577005a97abc3f6" title="Split the report string into tokens." alt="" coords="181,5,291,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph" id="abufr2tac__utils_8c_a1432202487dc3d91032202440d793694_icgraph">
<area shape="rect" title="Guess the WMO GTS header from filename." alt="" coords="104,5,232,32"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a294969d52c0ebb804a4ceaf8ae37379a" name="a294969d52c0ebb804a4ceaf8ae37379a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a294969d52c0ebb804a4ceaf8ae37379a">&#9670;&nbsp;</a></span>guess_WMO_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * guess_WMO_region </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>A1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>II</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>iii</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get WMO region A1 and Reg items from II and iii (WMO index) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A1</td><td>string woth resulting A1 </td></tr>
    <tr><td class="paramname">Reg</td><td>string with resulting Reg </td></tr>
    <tr><td class="paramname">II</td><td>WMO block number </td></tr>
    <tr><td class="paramname">iii</td><td>WMO number </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00211">211</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  212</span>{</div>
<div class="line"><span class="lineno">  213</span>  <span class="keywordtype">char</span> aux[8];</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <span class="comment">// filter bad inputs</span></div>
<div class="line"><span class="lineno">  216</span>  <span class="keywordflow">if</span> ( II == NULL || iii == NULL )</div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>  <span class="keywordflow">if</span> ( II[0] == 0 || iii[0] == 0 )</div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>  <span class="comment">// aux string</span></div>
<div class="line"><span class="lineno">  223</span>  sprintf ( aux,<span class="stringliteral">&quot;%s%s&quot;</span>, II, iii );</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>  <span class="keywordflow">if</span> ( ( II[0] == <span class="charliteral">&#39;0&#39;</span> &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;042&quot;</span> ) != aux ) &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;043&quot;</span> ) != aux )  &amp;&amp;</div>
<div class="line"><span class="lineno">  226</span>         ( strstr ( aux,<span class="stringliteral">&quot;044&quot;</span> ) != aux )  &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;0858&quot;</span> ) != aux ) &amp;&amp; ( strstr ( aux,<span class="stringliteral">&quot;0859&quot;</span> ) != aux ) ) ||</div>
<div class="line"><span class="lineno">  227</span>       II[0] == <span class="charliteral">&#39;1&#39;</span> || ( strstr ( aux,<span class="stringliteral">&quot;201&quot;</span> ) == aux ) ||</div>
<div class="line"><span class="lineno">  228</span>       strcmp ( II,<span class="stringliteral">&quot;22&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;26&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;27&quot;</span> ) == 0 ||</div>
<div class="line"><span class="lineno">  229</span>       strcmp ( II,<span class="stringliteral">&quot;33&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;34&quot;</span> ) == 0 || strcmp ( II,<span class="stringliteral">&quot;22&quot;</span> ) == 0 ||</div>
<div class="line"><span class="lineno">  230</span>       ( strstr ( aux,<span class="stringliteral">&quot;201&quot;</span> ) == aux ) )</div>
<div class="line"><span class="lineno">  231</span>    {</div>
<div class="line"><span class="lineno">  232</span>      <span class="comment">// Reg 6. Europe</span></div>
<div class="line"><span class="lineno">  233</span>      A1[0] = <span class="charliteral">&#39;6&#39;</span>;</div>
<div class="line"><span class="lineno">  234</span>      strcpy ( Reg,<span class="stringliteral">&quot;VI&quot;</span> );</div>
<div class="line"><span class="lineno">  235</span>    }</div>
<div class="line"><span class="lineno">  236</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;6&#39;</span> || ( strstr ( aux,<span class="stringliteral">&quot;0858&quot;</span> ) == aux ) || ( strstr ( aux,<span class="stringliteral">&quot;0859&quot;</span> ) == aux ) )</div>
<div class="line"><span class="lineno">  237</span>    {</div>
<div class="line"><span class="lineno">  238</span>      <span class="comment">// Reg 1. Africa</span></div>
<div class="line"><span class="lineno">  239</span>      A1[0] = <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"><span class="lineno">  240</span>      strcpy ( Reg,<span class="stringliteral">&quot;I&quot;</span> );</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;5&#39;</span> || ( strcmp ( II,<span class="stringliteral">&quot;49&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;21&quot;</span> ) == 0 ) ||</div>
<div class="line"><span class="lineno">  243</span>            ( strcmp ( II,<span class="stringliteral">&quot;23&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;24&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;25&quot;</span> ) == 0 ) ||</div>
<div class="line"><span class="lineno">  244</span>            ( strcmp ( II,<span class="stringliteral">&quot;28&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;29&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;30&quot;</span> ) == 0 ) ||</div>
<div class="line"><span class="lineno">  245</span>            ( strcmp ( II,<span class="stringliteral">&quot;31&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;32&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;38&quot;</span> ) == 0 ) ||</div>
<div class="line"><span class="lineno">  246</span>            ( strcmp ( II,<span class="stringliteral">&quot;35&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;36&quot;</span> ) == 0 ) || ( strcmp ( II,<span class="stringliteral">&quot;39&quot;</span> ) == 0 ) ||</div>
<div class="line"><span class="lineno">  247</span>            ( strcmp ( aux, <span class="stringliteral">&quot;20200&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;20999&quot;</span> ) &lt;= 0 ) ||</div>
<div class="line"><span class="lineno">  248</span>            ( strcmp ( aux, <span class="stringliteral">&quot;40000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;48599&quot;</span> ) &lt;= 0 ) ||</div>
<div class="line"><span class="lineno">  249</span>            ( strcmp ( aux, <span class="stringliteral">&quot;48800&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;49999&quot;</span> ) &lt;= 0 ) )</div>
<div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>      <span class="comment">// Reg 2. Asia</span></div>
<div class="line"><span class="lineno">  252</span>      A1[0] = <span class="charliteral">&#39;2&#39;</span>;</div>
<div class="line"><span class="lineno">  253</span>      strcpy ( Reg,<span class="stringliteral">&quot;II&quot;</span> );</div>
<div class="line"><span class="lineno">  254</span>    }</div>
<div class="line"><span class="lineno">  255</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strcmp ( aux, <span class="stringliteral">&quot;80000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;88999&quot;</span> ) &lt;= 0 )</div>
<div class="line"><span class="lineno">  256</span>    {</div>
<div class="line"><span class="lineno">  257</span>      <span class="comment">// Reg 3. South america</span></div>
<div class="line"><span class="lineno">  258</span>      A1[0] = <span class="charliteral">&#39;3&#39;</span>;</div>
<div class="line"><span class="lineno">  259</span>      strcpy ( Reg,<span class="stringliteral">&quot;III&quot;</span> );</div>
<div class="line"><span class="lineno">  260</span>    }</div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( II[0] == <span class="charliteral">&#39;7&#39;</span> || strstr ( aux,<span class="stringliteral">&quot;042&quot;</span> ) == aux ||</div>
<div class="line"><span class="lineno">  262</span>            strstr ( aux,<span class="stringliteral">&quot;043&quot;</span> ) == aux  || strstr ( aux,<span class="stringliteral">&quot;044&quot;</span> ) == aux )</div>
<div class="line"><span class="lineno">  263</span>    {</div>
<div class="line"><span class="lineno">  264</span>      <span class="comment">// Reg 4. North and central america</span></div>
<div class="line"><span class="lineno">  265</span>      A1[0] = <span class="charliteral">&#39;4&#39;</span>;</div>
<div class="line"><span class="lineno">  266</span>      strcpy ( Reg,<span class="stringliteral">&quot;IV&quot;</span> );</div>
<div class="line"><span class="lineno">  267</span>    }</div>
<div class="line"><span class="lineno">  268</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( strcmp ( aux, <span class="stringliteral">&quot;48600&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;48799&quot;</span> ) &lt;= 0 ) ||</div>
<div class="line"><span class="lineno">  269</span>            ( strcmp ( aux, <span class="stringliteral">&quot;90000&quot;</span> ) &gt;= 0 &amp;&amp; strcmp ( aux, <span class="stringliteral">&quot;98999&quot;</span> ) &lt;= 0 ) )</div>
<div class="line"><span class="lineno">  270</span>    {</div>
<div class="line"><span class="lineno">  271</span>      <span class="comment">// Reg 5. Pacific South</span></div>
<div class="line"><span class="lineno">  272</span>      A1[0] = <span class="charliteral">&#39;5&#39;</span>;</div>
<div class="line"><span class="lineno">  273</span>      strcpy ( Reg,<span class="stringliteral">&quot;V&quot;</span> );</div>
<div class="line"><span class="lineno">  274</span>    }</div>
<div class="line"><span class="lineno">  275</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( strcmp ( II,<span class="stringliteral">&quot;89&quot;</span> ) == 0 )</div>
<div class="line"><span class="lineno">  276</span>    {</div>
<div class="line"><span class="lineno">  277</span>      <span class="comment">// Reg 0. Antarctica</span></div>
<div class="line"><span class="lineno">  278</span>      A1[0] = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><span class="lineno">  279</span>      strcpy ( Reg,<span class="stringliteral">&quot;0&quot;</span> );</div>
<div class="line"><span class="lineno">  280</span>    }</div>
<div class="line"><span class="lineno">  281</span>  <span class="keywordflow">return</span> A1;</div>
<div class="line"><span class="lineno">  282</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bufr2tac__synop_8c_source.html#l00093">guess_WMO_region_synop()</a>, <a class="el" href="bufr2tac__temp_8c_source.html#l00034">guess_WMO_region_temp()</a>, and <a class="el" href="bufr2tac__x01_8c_source.html#l00054">syn_parse_x01()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a294969d52c0ebb804a4ceaf8ae37379a_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_a294969d52c0ebb804a4ceaf8ae37379a_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a294969d52c0ebb804a4ceaf8ae37379a_icgraph" id="abufr2tac__utils_8c_a294969d52c0ebb804a4ceaf8ae37379a_icgraph">
<area shape="rect" title="get WMO region A1 and Reg items from II and iii (WMO index)" alt="" coords="963,56,1103,83"/>
<area shape="rect" href="bufr2tac__synop_8c.html#a895702a2caf61966ef4cbeb09148a5f9" title="Try to find WMO region if it is not already set and WMO Block and number index are known." alt="" coords="732,5,915,32"/>
<area shape="rect" href="bufr2tac__temp_8c.html#a9d459f1fcbb047c9fe46b82687cb6fa5" title=" " alt="" coords="735,56,911,83"/>
<area shape="rect" href="bufr2tac__x01_8c.html#a7e01ae6b0c895b8a3e3a7d3d7051cf24" title="Parse a expanded descriptor with X = 01." alt="" coords="768,107,879,133"/>
<area shape="rect" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report" alt="" coords="521,107,684,133"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,107,473,133"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,99,263,141"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,107,56,133"/>
</map>
</div>

</div>
</div>
<a id="a3d4beba3db514cc374360aa9042ad482" name="a3d4beba3db514cc374360aa9042ad482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d4beba3db514cc374360aa9042ad482">&#9670;&nbsp;</a></span>integer_to_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int integer_to_descriptor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse an integer with a descriptor fom bufr ECWMF libary </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>pointer to a struct <a class="el" href="structbufr__descriptor.html">bufr_descriptor</a> where to set the result on output </td></tr>
    <tr><td class="paramname">id</td><td>integer with the descriptor from ewcwf </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00041">41</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>{</div>
<div class="line"><span class="lineno">   43</span>  <span class="keywordflow">if</span> ( d == NULL )</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   45</span>  d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#ae9e66859d27018f2de3bc31f21c75c4e">f</a> = <span class="keywordtype">id</span> / 100000;</div>
<div class="line"><span class="lineno">   46</span>  d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#a10c6cde4791d3f4721df491db0092b56">x</a> = ( <span class="keywordtype">id</span> % 100000 ) / 1000;</div>
<div class="line"><span class="lineno">   47</span>  d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#aa86bfd702067eca32ea3266fc0a27ad8">y</a> = <span class="keywordtype">id</span> % 1000;</div>
<div class="line"><span class="lineno">   48</span>  sprintf ( d-&gt;<a class="code hl_variable" href="structbufr__descriptor.html#a82a2a8662899c8e22d8a6e8965a7dca6">c</a>, <span class="stringliteral">&quot;%06d&quot;</span>, <span class="keywordtype">id</span> );</div>
<div class="line"><span class="lineno">   49</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   50</span>}</div>
<div class="ttc" id="astructbufr__descriptor_html_a82a2a8662899c8e22d8a6e8965a7dca6"><div class="ttname"><a href="structbufr__descriptor.html#a82a2a8662899c8e22d8a6e8965a7dca6">bufr_descriptor::c</a></div><div class="ttdeci">char c[12]</div><div class="ttdef"><b>Definition:</b> <a href="bufrdeco_8h_source.html#l00378">bufrdeco.h:378</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bufrdeco_8h_source.html#l00378">bufr_descriptor::c</a>, <a class="el" href="bufrdeco_8h_source.html#l00374">bufr_descriptor::f</a>, <a class="el" href="bufrdeco_8h_source.html#l00375">bufr_descriptor::x</a>, and <a class="el" href="bufrdeco_8h_source.html#l00376">bufr_descriptor::y</a>.</p>

</div>
</div>
<a id="a129b6c8a3bbf2d6545439b80255004be" name="a129b6c8a3bbf2d6545439b80255004be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129b6c8a3bbf2d6545439b80255004be">&#9670;&nbsp;</a></span>met_datetime_to_YYGG()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * met_datetime_to_YYGG </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get YYGG from a struct <a class="el" href="structmet__datetime.html">met_datetime</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>string with result as output </td></tr>
    <tr><td class="paramname">t</td><td>pointer to source struct <a class="el" href="structmet__datetime.html">met_datetime</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00180">180</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  181</span>{</div>
<div class="line"><span class="lineno">  182</span>  time_t tx;</div>
<div class="line"><span class="lineno">  183</span>  <span class="keyword">struct </span>tm tim;</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>  tx = ( ( t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> + 1800 ) / 3600 ) * 3600 ; <span class="comment">// rounding to next whole hour</span></div>
<div class="line"><span class="lineno">  186</span>  memset ( &amp;tim, 0, <span class="keyword">sizeof</span> ( <span class="keyword">struct</span> tm ) );</div>
<div class="line"><span class="lineno">  187</span>  gmtime_r ( &amp;tx, &amp;tim );</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>  strftime ( target, 8, <span class="stringliteral">&quot;%d%H&quot;</span>, &amp;tim );</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>  <span class="keywordflow">return</span> target;</div>
<div class="line"><span class="lineno">  192</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metcommon_8h_source.html#l00061">met_datetime::t</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a129b6c8a3bbf2d6545439b80255004be_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_a129b6c8a3bbf2d6545439b80255004be_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a129b6c8a3bbf2d6545439b80255004be_icgraph" id="abufr2tac__utils_8c_a129b6c8a3bbf2d6545439b80255004be_icgraph">
<area shape="rect" title="Get YYGG from a struct met_datetime." alt="" coords="727,13,889,39"/>
<area shape="rect" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title=" " alt="" coords="521,13,679,39"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,13,473,39"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,5,263,47"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,39"/>
</map>
</div>

</div>
</div>
<a id="ab22cff10c1bb64730fad9765ef9c329c" name="ab22cff10c1bb64730fad9765ef9c329c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22cff10c1bb64730fad9765ef9c329c">&#9670;&nbsp;</a></span>round_met_datetime_to_hour()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int round_met_datetime_to_hour </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00194">194</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>{</div>
<div class="line"><span class="lineno">  196</span>  target-&gt;<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> = ( ( source-&gt;<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> + 1800 ) / 3600 ) * 3600 ; <span class="comment">// rounding to next whole hour</span></div>
<div class="line"><span class="lineno">  197</span>  memset ( &amp;target-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>, 0, sizeof ( <span class="keyword">struct</span> tm ) );</div>
<div class="line"><span class="lineno">  198</span>  gmtime_r ( &amp;target-&gt;<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a>, &amp;target-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><span class="lineno">  199</span>  strftime ( target-&gt;<a class="code hl_variable" href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">datime</a>, 16, <span class="stringliteral">&quot;%Y%m%d%H%M&quot;</span>, &amp;target-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><span class="lineno">  200</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  201</span>}</div>
<div class="ttc" id="astructmet__datetime_html_aa00faf24bdab309c3086b8288e0f198d"><div class="ttname"><a href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">met_datetime::datime</a></div><div class="ttdeci">char datime[16]</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00063">metcommon.h:63</a></div></div>
<div class="ttc" id="astructmet__datetime_html_ac3b81071a1f25ef80443673c74c0167d"><div class="ttname"><a href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">met_datetime::tim</a></div><div class="ttdeci">struct tm tim</div><div class="ttdef"><b>Definition:</b> <a href="metcommon_8h_source.html#l00062">metcommon.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metcommon_8h_source.html#l00063">met_datetime::datime</a>, <a class="el" href="metcommon_8h_source.html#l00061">met_datetime::t</a>, and <a class="el" href="metcommon_8h_source.html#l00062">met_datetime::tim</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph" id="abufr2tac__utils_8c_ab22cff10c1bb64730fad9765ef9c329c_icgraph">
<area shape="rect" title=" " alt="" coords="727,5,867,47"/>
<area shape="rect" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title=" " alt="" coords="521,13,679,39"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,13,473,39"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,5,263,47"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,13,56,39"/>
</map>
</div>

</div>
</div>
<a id="aca5951fa477d55a17c610f7c10cdd18a" name="aca5951fa477d55a17c610f7c10cdd18a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5951fa477d55a17c610f7c10cdd18a">&#9670;&nbsp;</a></span>three_bytes_to_uint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int three_bytes_to_uint </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the integer value from an array of three bytes, most significant first </p>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00030">30</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>{</div>
<div class="line"><span class="lineno">   32</span>  <span class="keywordflow">return</span> ( source[2] + source[1] * 256 + source[0] * 65536 );</div>
<div class="line"><span class="lineno">   33</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bufr2tac__io_8c_source.html#l00034">read_bufr()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph" id="abufr2tac__utils_8c_aca5951fa477d55a17c610f7c10cdd18a_icgraph">
<area shape="rect" title="returns the integer value from an array of three bytes, most significant first" alt="" coords="129,5,265,32"/>
<area shape="rect" href="bufr2tac__io_8c.html#a79a14be80c1bb9a8037ceaa77e299f65" title="read a bufr file as an array of unsigned chars" alt="" coords="5,5,81,32"/>
</map>
</div>

</div>
</div>
<a id="a4ef4777dfa46d3929577005a97abc3f6" name="a4ef4777dfa46d3929577005a97abc3f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef4777dfa46d3929577005a97abc3f6">&#9670;&nbsp;</a></span>tokenize_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tokenize_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tk</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ntk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>blanks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split the report string into tokens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tk</td><td>array of strings. Memory have to be allocated previously by caller </td></tr>
    <tr><td class="paramname">ntk</td><td>max amount of elements in tk array. </td></tr>
    <tr><td class="paramname">target</td><td>string which is the report to split </td></tr>
    <tr><td class="paramname">len</td><td>lenght of <em>target</em> string </td></tr>
    <tr><td class="paramname">blanks</td><td>string with the character considered as blanks. If null the default " =\n\r\v\t" is considered Returns the number of tokens <em>target</em> has been splitted into. Retuns 0 in case of a void or too large target. NOTE: <em>target</em> is changed after calling this routine. In fact, the pointers in <em>tk</em>[] are linking to some char in string <em>target</em> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00121">121</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>{</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordtype">size_t</span> i = 1, n;</div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordtype">char</span> d[] = <span class="stringliteral">&quot; =\n\r\v\t&quot;</span>, *b, *aux;</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>  <span class="comment">// set the blanks array</span></div>
<div class="line"><span class="lineno">  127</span>  <span class="keywordflow">if</span> ( blanks == NULL )</div>
<div class="line"><span class="lineno">  128</span>    b = &amp;d[0];</div>
<div class="line"><span class="lineno">  129</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  130</span>    b = blanks;</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>  <span class="comment">// check target string limits</span></div>
<div class="line"><span class="lineno">  133</span>  n = strlen ( target );</div>
<div class="line"><span class="lineno">  134</span>  <span class="keywordflow">if</span> ( n == 0 || n &gt; len )</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>  <span class="comment">// the split loop</span></div>
<div class="line"><span class="lineno">  138</span>  tk[0] = strtok_r ( target, b, &amp;aux );</div>
<div class="line"><span class="lineno">  139</span>  <span class="keywordflow">while</span> ( i &lt; ntk &amp;&amp;</div>
<div class="line"><span class="lineno">  140</span>          ( ( tk[i] = strtok_r ( NULL, b, &amp;aux ) ) != NULL ) &amp;&amp;</div>
<div class="line"><span class="lineno">  141</span>          strlen ( tk[i] ) &gt; 2 &amp;&amp;</div>
<div class="line"><span class="lineno">  142</span>          strlen ( tk[i] ) &lt; 10 )</div>
<div class="line"><span class="lineno">  143</span>    i++;</div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">if</span> ( i &lt; ntk )</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">return</span> i;</div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">return</span> ntk - 1;</div>
<div class="line"><span class="lineno">  148</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bufr2tac__utils_8c_source.html#l00466">guess_gts_header()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph" id="abufr2tac__utils_8c_a4ef4777dfa46d3929577005a97abc3f6_icgraph">
<area shape="rect" title="Split the report string into tokens." alt="" coords="280,5,389,32"/>
<area shape="rect" href="bufr2tac__utils_8c.html#a1432202487dc3d91032202440d793694" title="Guess the WMO GTS header from filename." alt="" coords="104,5,232,32"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="aaeb0b1348d967dccdf492c088172e36a" name="aaeb0b1348d967dccdf492c088172e36a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb0b1348d967dccdf492c088172e36a">&#9670;&nbsp;</a></span>YYYYMMDDHHmm_to_met_datetime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int YYYYMMDDHHmm_to_met_datetime </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmet__datetime.html">met_datetime</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the string YYYYMMDDHHmm[ss] and set a struct <a class="el" href="structmet__datetime.html">met_datetime</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>string with date in YYYYMMDDHHmm[ss] format </td></tr>
    <tr><td class="paramname">t</td><td>pointer to a struct <a class="el" href="structmet__datetime.html">met_datetime</a> where to set the results </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bufr2tac__utils_8c_source.html#l00156">156</a> of file <a class="el" href="bufr2tac__utils_8c_source.html">bufr2tac_utils.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  157</span>{</div>
<div class="line"><span class="lineno">  158</span>  <span class="keywordflow">if</span> ( strlen ( source ) != 12  &amp;&amp; strlen ( source ) != 14 )</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  160</span>  memset ( &amp;t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a>, 0, sizeof ( <span class="keyword">struct</span> tm ) );</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">if</span> ( strlen ( source ) == 12 )</div>
<div class="line"><span class="lineno">  162</span>    {</div>
<div class="line"><span class="lineno">  163</span>      strptime ( source, <span class="stringliteral">&quot;%Y%m%d%H%M&quot;</span>, &amp;t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><span class="lineno">  164</span>    }</div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  166</span>    {</div>
<div class="line"><span class="lineno">  167</span>      strptime ( source, <span class="stringliteral">&quot;%Y%m%d%H%M%S&quot;</span>, &amp;t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="line"><span class="lineno">  169</span>  strcpy ( t-&gt;<a class="code hl_variable" href="structmet__datetime.html#aa00faf24bdab309c3086b8288e0f198d">datime</a>, source );</div>
<div class="line"><span class="lineno">  170</span>  t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ae3a1d87e2282cb3ba5a2e798240ac20d">t</a> = mktime ( &amp;t-&gt;<a class="code hl_variable" href="structmet__datetime.html#ac3b81071a1f25ef80443673c74c0167d">tim</a> );</div>
<div class="line"><span class="lineno">  171</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  172</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metcommon_8h_source.html#l00063">met_datetime::datime</a>, <a class="el" href="metcommon_8h_source.html#l00061">met_datetime::t</a>, and <a class="el" href="metcommon_8h_source.html#l00062">met_datetime::tim</a>.</p>

<p class="reference">Referenced by <a class="el" href="bufr2tac__buoy_8c_source.html#l00074">parse_subset_as_buoy()</a>, <a class="el" href="bufr2tac__climat_8c_source.html#l00038">parse_subset_as_climat()</a>, <a class="el" href="bufr2tac__synop_8c_source.html#l00119">parse_subset_as_synop()</a>, and <a class="el" href="bufr2tac__temp_8c_source.html#l00075">parse_subset_as_temp()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph.png" border="0" usemap="#abufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" alt=""/></div>
<map name="abufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph" id="abufr2tac__utils_8c_aaeb0b1348d967dccdf492c088172e36a_icgraph">
<area shape="rect" title="Parse the string YYYYMMDDHHmm[ss] and set a struct met_datetime." alt="" coords="732,74,921,115"/>
<area shape="rect" href="bufr2tac__buoy_8c.html#ad8bb92861ee8db76f664f8fa8923a099" title=" " alt="" coords="525,5,681,32"/>
<area shape="rect" href="bufr2tac__climat_8c.html#a9a64417498c5d0c1c66d9006e2ff8a45" title=" " alt="" coords="521,56,684,83"/>
<area shape="rect" href="bufr2tac__synop_8c.html#a3178eb404dc66ceccd7a08a3c719c2aa" title="parses a subset sequence as an Land fixed SYNOP FM&#45;12, SHIP FM&#45;13 or SYNOP&#45;mobil FM&#45;14 report" alt="" coords="521,107,684,133"/>
<area shape="rect" href="bufr2tac__temp_8c.html#a592db452b503cfcb75c74616ffe39548" title=" " alt="" coords="524,157,681,184"/>
<area shape="rect" href="bufr2tac__sqparse_8c.html#a7b839bfd63c95d7fdbad26be3c1d86be" title="Parse a sequence of expanded descriptors for a subset." alt="" coords="311,81,473,108"/>
<area shape="rect" href="bufrtotac__io_8c.html#a156a5e3480972b5590b8ec744ba32252" title=" " alt="" coords="104,74,263,115"/>
<area shape="rect" href="bufrtotac_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,81,56,108"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
